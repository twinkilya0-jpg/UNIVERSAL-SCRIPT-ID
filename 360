local function startRotation()
    if rotationConnection then
        rotationConnection:Disconnect()
        rotationConnection = nil
    end
    
    if not getgenv().rotationEnabled or not HumanoidRootPart then return end
    
    rotationConnection = RunService.Heartbeat:Connect(function(deltaTime)
        if HumanoidRootPart and HumanoidRootPart.Parent then
            -- Получаем текущее вращение
            local currentRotation = HumanoidRootPart.Orientation
            -- Изменяем только ось Y
            local newRotation = Vector3.new(
                currentRotation.X,
                currentRotation.Y + (rotationSpeed * deltaTime),
                currentRotation.Z
            )
            -- Применяем новое вращение
            HumanoidRootPart.Orientation = newRotation
        else
            -- Останавливаем вращение если части больше нет
            if rotationConnection then
                rotationConnection:Disconnect()
                rotationConnection = nil
            end
        end
    end)
end

-- ★ ДОБАВЛЕНО: Функция для остановки вращения
local function stopRotation()
    if rotationConnection then
        rotationConnection:Disconnect()
        rotationConnection = nil
    end
end

-- ★ ДОБАВЛЕНО: Обновляем состояние вращения
local function updateRotationState()
    if getgenv().rotationEnabled and getgenv().autoJumpEnabled then
        startRotation()
    else
        stopRotation()
    end
end
